# 以太坊2.0

## 什么是以太坊2.0？

以太坊2.0，也称为Eth2或Serenity，也就是现有以太坊区块链的升级版本。本次升级旨在提高以太坊网络的速度、效率和可扩展性，使其能够处理更多交易并缓解瓶颈。

然而Eth2并不完全“存在”，2022年1月，以太坊基金会表示将不再把ETH的升级称之为“以太坊2.0”。此次更名旨在反映这样一个事实，即之前被称为“以太坊2.0”只是一次升级，而不会诞生一个新的网络。因此，现在的**Eth1被称为“执行层”**，智能合约和网络规则驻留在其中，而**Eth2被称为Consensus Layer“共识层”**，它确保参与网络的设备按照其规则行事。但业界一直还是延续“以太坊2.0”的叫法。

在以太坊社区中，以太坊2.0并不是一个新的想法。改变以太坊底层共识机制以解决PoW区块链的限制，这个想法自以太坊区块链创世以来就存在了。在2015年7月以太坊主网 Frontier 发布之后，以太坊2.0紧随许多计划的以太坊主网升级而至，这些升级包括：

- Homestead (家园)，2016年3月
- Metropolis: Byzantium (大都会：拜占庭)，2017年10月
- Metropolis: Constantinople (大都会：君士坦丁堡)，2019年2月
- Istanbul (伊斯坦布尔)，2019年12月

相比于过去的升级，以太坊2.0的发布尤为重要，因为它将实现PoS共识机制，使网络摆脱当前的PoW架构。

### PoW存在的问题

* **可扩展性**：由于每个区块是按照顺序被挖出的，且每个区块中可以记录的数据量有限 (即一种称为区块大小的度量)，以太坊在给定的时间内只能处理数量有限的信息。如果待处理的交易数量超过了1个区块可以容纳的数量，那么剩余的交易就必须等到下一个区块，以此类推。这种可扩展性问题将通过以太坊2.0 PoS 网络上实现的Sharding (分片) 得以解决。
* **可及性**：虽然PoW区块链很实用，但入场成为一名矿工的障碍是相当高的。个人必须购买并安装所有必要的硬件设施。为了从区块奖励中赚取可观的回报，可能还必须在电力成本较低廉的地区运行设备。另一个更深的层面是，公司和企业的电力成本往往会降低，这意味着单个矿工为了寻求盈利的最大化，将需要成立一家公司并购买足够多的挖矿硬件，以让自己的投入得到回报。几个最大的挖矿集团在竞争中超过了大多数普通的区块链用户，使后者无法参与到网络的维护中，进而导致了矿工的集中化问题。在以太坊2.0中，PoS 的目标之一正是为更多的独立验证者参与进来创造公平的竞争环境，让他们通过维护网络的真实性来获得共享的回报。

## 以太坊2.0升级的几个阶段

### 阶段0

Eth2 将分阶段推出，从2020年的阶段0开始。阶段0将启动以太坊2.0网络的信标链（beacon chain）。信标链将实现PoS并管理验证者的注册，验证者将开始在以太坊2.0上证明和创建区块。

信标链要发布创世区块，必须要至少 424,288 ETH 被质押到网络上，也即至少需要 16,384 名验证者（确定这些数字是为了确保网络足够的安全性和去中心化）。只有当这个门槛值达到之后，Staking奖励才会进行分配，这就是阶段0的早期参与者需要进行一些利他行为的部分原因。

随着信标链的上线和PoS的实现，最初的以太坊PoW区块链将继续存在。事实上，在阶段0期间，信标链对于大多数以太坊用户来说并不是特别有用；此时的信标链无法处理交易、执行智能合约或者托管Dapp（去中心化应用程序）。根据设计，这样是为了确保在Dapp和用户开始进行每天数以百万计的交易之前，PoS作为一个上线和运行中的网络经过了大量的测试。为了确保以太坊2.0的启动不会干扰当前的以太坊生态系统，当前的以太坊1.0链将会在阶段0期间继续并行运行并获得升级。在阶段1.5期间，这两条链将合并以确保连贯性，成为单一的以太坊网络。

### 阶段1

阶段1的主要改进是实现分片链 (shard chains)，是一种可扩展性解决方案。对于以太坊2.0来说，分片 (sharding) 将使以太坊区块链被分区成64 条独立的链 (称为分片链)，这些分片链彼此并行运行并无缝地互操作。分片通过允许以太坊同时处理多笔交易来解决可扩展性问题：理论上来说，一次处理64个区块。通过数十条同时交互运行的区块链 (分片链)，数据负担可以分摊到同时被处理的区块之上。

### 阶段1.5

阶段1期间的一个重要时刻就是将原来的PoW以太坊区块链与全新的PoS链合并。这个时刻在以太坊社区中被称为阶段1.5。具体来说，PoW以太坊区块链将被带入到以太坊2.0中，作为64条分片链中的其中一条与信标链一起存在，这意味不会中断连续性或数据历史。这也意味着ETH持有者将无需在以太坊1.0链和2.0链之间经历任何形式的代币转移或兑换；相反，他们将可以无缝地在以太坊2.0中使用他们的ETH，无需进行任何额外的工作，也不会面临自己的ETH被淘汰的风险。尽管原来的PoW链的历史记录将继续存在，但这条链将不再需要通过PoW共识机制来维护，它将与以太坊2.0上其他的PoS分片链一样运行。

### 阶段2

随着PoS和分片成功地实现，阶段2将能够实现ETH账户、交易、转账和取款，以及智能合约执行等功能。

### 阶段2以后

阶段2之后，以太坊区块链将不会停止其发展。阶段2之后的几年里，在增加以太坊网络的覆盖面和功能方面将有更多的机遇。

## 以太坊1.x

预计以太坊2.0在阶段2实现之前不会完全地发挥作用。在此期间，以太坊生态系统将继续发展，以太坊将依旧需要应对来自开发者、Dapp搭建、企业、政府等的需求。因此，至少在阶段1之前，以太坊PoW链将继续作为被称为以太坊1.x的形式存在。开发者们将继续致力于改进以太坊1.x链，即便以太坊2.0的未来正在被构建。

***

参考文章：https://mp.weixin.qq.com/s/fBpoeKqNiaOZ8EpGLaycRw