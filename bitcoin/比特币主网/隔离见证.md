# 隔离见证

## 介绍

***

**隔离见证**（SegWit）是一个由多个 BIP（141、142、143、144 和 145）描述的**软分叉**，其主要用意是**优化比特币交易和区块的结构**，将**交易的签名**（也叫 “脚本签名（scriptSig）”、“见证（witness）” 或 “解锁脚本（unlocking script）”）从交易中移到一个独立的结构中。它**不仅允许降低比特币交易的数据量大小**（因此能让一个区块塞下更多的交易），**也能解决 “交易熔融性（transaction malleability）” 问题**（也就是阻碍闪电网络实现的缺陷），对**支付通道和闪电网络**这样基于比特币交易结构的技术来说极为关键。

## 隔离见证主要优势

### 增加容量

隔离见证的最大优势之一就是**增加区块容量**。通过从交易输入中删除签名数据，可以在一个区块中存储更多交易。

交易包括两个主要部分：输入和输出。本质上，输入包含发送者的公共地址，而输出包含接收者的公共地址。但是，发送人必须证明他们已经转移了资金，并且必须使用数字签名。

如果没有隔离见证，则签名数据最多可占用一个区块的65％。使用隔离见证，会把签名数据从交易的输入中移除。这使有效区块大小从1 MB增加到大约4 MB。

请注意，隔离见证并不仅仅是区块大小的增加。相反，它是一种工程解决方案，可以在**不增加区块大小限制的情况下增加有效区块的大小**。更具体地说，实际区块大小仍为1 MB，但有效块大小的限制为4 MB。

此外，隔离见证还引入了**区块权重**的概念。我们可以将区块权重视为替代区块大小的概念。本质上，区块权重是一种度量单位，它包括所有的区块数据：包括交易数据（1 MB）和签名数据（最大3 MB），这些数据不再是输入字段的一部分。

### 交易速度提升

除了可以存储更多交易的区块，隔离见证还能够提高交易速度，由于区块链中可能存储大量的交易数据。即使区块的出块时间相同，但区块中可以容纳更多的事务，因此TPS（每秒交易量）会更高。

交易速度的提升也能够帮助降低比特币网络的交易成本。在实施隔离见证之前，每笔交易费用大多在30美元以上。但是，随着隔离见证的实施，交易成本大幅降低至每笔交易1美元。

### 交易延展性修复

比特币面临的另一个主要问题是篡改交易签名。如果签名被篡改，则可能导致两方之间的交易被破坏。由于存储在区块链上的数据实际上是不可变的，因此无效交易会永久存储在区块链上。

使用隔离见证，签名不再是交易数据的一部分，从而消除了更改此数据的可能性。此修复程序支持在区块链社区内进行进一步的创新，包括**二层协议**和**智能合约**。

## SegWit与SegWit2x

SegWit是软分叉升级，意味着它支持向后兼容。换句话说，未更新SegWit的比特币节点仍然能够处理交易。但是，隔离见证还有另一个可实施的版本，称为SegWit2x（S2X），该版本需要进行硬分叉升级。

SegWit和SegWit2x之间的主要区别在于，后者**不仅将包括交易批处理的更改**，而且还包括**增加区块大小**（从1MB增加到2MB）。尽管如此，较大的区块大小会增加节点操作员和矿工的负担，因为他们要处理更多的数据。

另一个显著区别是SegWit提案由比特币社区支持和执行。其中也催生了UASF的概念，UASF代表用户激活的软分叉。

另一方面，SegWit2x建议对管理比特币的基本规则进行实质性修改。但是由于开发人员无法就其采用和实施达成共识，因此SegWit2x最终被暂停。

***

参考文章：https://academy.binance.com/zh/articles/a-beginners-guide-to-segretated-witness-segwit?&utm_campaign=web_share_copy
